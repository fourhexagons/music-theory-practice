<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Theory Practice</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/components/menu.css">
    <meta name="description" content="A simple music theory practice app.">
    <meta name="theme-color" content="#555555">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.ico" sizes="any">
  </head>
  <body>
    <!-- Persistent Left Menu Bar -->
    <div id="practice-menu-bar" class="practice-menu-bar">
      <button id="practice-menu-button" class="practice-menu-button" aria-label="Open practice menu">
        <span class="menu-icon">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </span>
        <span class="menu-icon-x">
          <span class="x-line"></span>
          <span class="x-line"></span>
        </span>
      </button>
      <span class="practice-menu-bar-title">Practice</span>
    </div>

    <!-- Practice Menu Overlay (now offset to right of bar) -->
    <div id="practice-menu-overlay" class="practice-menu-overlay">
      <div class="practice-menu-overlay-inner">
        <div class="practice-menu-columns">
          <!-- Left Column: Main Menu Items -->
          <nav class="practice-menu-nav">
            <ul class="practice-menu-list">
              <li class="practice-menu-item"><button class="practice-menu-link" data-section="start-over">Start Over</button></li>
              <li class="practice-menu-item"><button class="practice-menu-link" data-section="difficulty">Difficulty</button></li>
              <li class="practice-menu-item"><button class="practice-menu-link" data-section="keys">Keys</button></li>
            </ul>
          </nav>
          <!-- Right Column: Options -->
          <div class="practice-menu-options-area">
            <!-- Difficulty Section -->
            <div class="practice-menu-options" id="difficulty-section">
              <ul class="practice-menu-options-list">
                <li><button class="practice-menu-option" data-difficulty="no-accidentals">No Accidentals</button></li>
                <li><button class="practice-menu-option" data-difficulty="1-3-sharps">1-3 Sharps</button></li>
                <li><button class="practice-menu-option" data-difficulty="1-3-flats">1-3 Flats</button></li>
                <li><button class="practice-menu-option" data-difficulty="4-6-sharps">4-6 Sharps</button></li>
                <li><button class="practice-menu-option" data-difficulty="4-6-flats">4-6 Flats</button></li>
                <li><button class="practice-menu-option" data-difficulty="full-random">Full Random</button></li>
                <li><button class="practice-menu-option" data-difficulty="spelling-random-sevenths">Spelling Random Sevenths</button></li>
              </ul>
            </div>
            <!-- Keys Section -->
            <div class="practice-menu-options" id="keys-section">
              <ul class="practice-menu-options-list">
                <li><button class="practice-menu-option" data-key="F#">F#</button></li>
                <li><button class="practice-menu-option" data-key="B">B</button></li>
                <li><button class="practice-menu-option" data-key="E">E</button></li>
                <li><button class="practice-menu-option" data-key="A">A</button></li>
                <li><button class="practice-menu-option" data-key="D">D</button></li>
                <li><button class="practice-menu-option" data-key="G">G</button></li>
                <li><button class="practice-menu-option" data-key="C">C</button></li>
                <li><button class="practice-menu-option" data-key="F">F</button></li>
                <li><button class="practice-menu-option" data-key="Bb">Bb</button></li>
                <li><button class="practice-menu-option" data-key="Eb">Eb</button></li>
                <li><button class="practice-menu-option" data-key="Ab">Ab</button></li>
                <li><button class="practice-menu-option" data-key="Db">Db</button></li>
                <li><button class="practice-menu-option" data-key="Gb">Gb</button></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="app-container">
      <!-- New Learning Path UI will be rendered here -->
    </div>

    <div class="bottom-wrapper">
      <div id="advanced-practice-root">
        <!-- Advanced practice UI will be rendered here -->
      </div>
      <footer class="app-footer">
        <!-- Version number will be injected here by JS -->
      </footer>
    </div>

    <!-- Core Libraries and Utilities -->
    <script src="js/utils/errorHandler.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="/js/data/quizData.js"></script>
    <script src="/js/utils/normalization.js"></script>
    <script src="/js/state/learningState.js?v=13"></script>

    <!-- Practice Menu Component -->
    <script src="/js/practice-menu.js"></script>

    <!-- Main Application Logic -->
    <script src="/js/main.js?v=13"></script>

    <script>
      // Register service worker for PWA
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('ServiceWorker registered'))
          .catch(err => console.log('ServiceWorker registration failed:', err));
      }
    </script>
  </body>
</html>
