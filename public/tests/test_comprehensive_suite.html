<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Comprehensive Test Suite</title>
    <link rel="stylesheet" href="css/test-suite.css">
    <style>
        .test-result {
            margin: 8px 0;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid;
            word-break: break-word;
            overflow-wrap: anywhere;
        }
        
        .test-result.pass {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        .test-result.fail {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .test-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .status {
            font-weight: bold;
        }
        
        .test-details {
            font-family: monospace;
            background-color: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            margin: 4px 0;
        }
        
        .category-header {
            background-color: #e9ecef;
            padding: 10px;
            margin: 20px 0 10px 0;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .test-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .test-controls .btn {
            flex: 1;
            min-width: 150px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Test Suite</a>
        <div class="header">
            <h1>üß™ Comprehensive Test Suite</h1>
            <p>Complete test coverage for all app functionality - consolidated and enhanced</p>
        </div>
        
        <div class="content-box">
            <div id="summary" class="summary" style="display:none;">
                <div id="summary-content"></div>
            </div>
            
            <div class="test-controls">
                <button class="btn" onclick="runAllTests()">Run All Tests</button>
                <button class="btn" onclick="runCoreTests()">Core Logic Only</button>
                <button class="btn" onclick="runDataTests()">Data & Validation Only</button>
                <button class="btn" onclick="runUITests()">UI & Integration Only</button>
                <button class="btn" onclick="runAdvancedTests()">Advanced Features Only</button>
                <button class="btn" onclick="runPerformanceTests()">Performance Only</button>
                <button class="btn" onclick="copyResults()">Copy Results (JSON)</button>
            </div>
            
            <div id="copy-status" class="status-area"></div>
            <div id="results"></div>
        </div>
    </div>

    <script src="../js/data/quizData.js"></script>
    <script src="../js/utils/normalization.js"></script>
    <script src="../js/utils/helpers.js"></script>
    <script src="../js/utils/validation.js"></script>
    <script src="../js/state/learningState.js"></script>
    <script src="../js/utils/errorHandler.js"></script>
    <script src="../js/practice-menu.js"></script>
    <script src="js/test-dashboard.js"></script>
    
    <script>
        let testResults = [];
        
        function addResult(name, passed, expected, actual, category, details = '') {
            const result = {
                name,
                passed,
                expected,
                actual,
                category,
                details
            };
            testResults.push(result);
        }
        
        function displayResults() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            
            const failed = testResults.filter(r => !r.passed);
            const passed = testResults.filter(r => r.passed);
            
            if (failed.length > 0) {
                const failHeader = document.createElement('h2');
                failHeader.textContent = '‚ùå Failing Tests';
                failHeader.style.color = '#dc3545';
                resultsDiv.appendChild(failHeader);
                
                const failContainer = document.createElement('div');
                failContainer.className = 'test-columns';
                failed.forEach(result => {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'test-result fail';
                    resultDiv.innerHTML = `
                        <strong>${result.name}</strong> <span class="status">‚ùå FAIL</span><br>
                        <em>Expected:</em> ${result.expected}, <em>Actual:</em> ${result.actual}<br>
                        <em>Category:</em> ${result.category}
                        ${result.details ? `<div class="test-details">${result.details}</div>` : ''}
                    `;
                    failContainer.appendChild(resultDiv);
                });
                resultsDiv.appendChild(failContainer);
            }
            
            if (passed.length > 0) {
                const passHeader = document.createElement('h2');
                passHeader.textContent = '‚úÖ Passing Tests';
                passHeader.style.color = '#28a745';
                passHeader.style.marginTop = '2rem';
                resultsDiv.appendChild(passHeader);
                
                const passContainer = document.createElement('div');
                passContainer.className = 'test-columns';
                passed.forEach(result => {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'test-result pass';
                    resultDiv.innerHTML = `
                        <strong>${result.name}</strong> <span class="status">‚úÖ PASS</span><br>
                        <em>Expected:</em> ${result.expected}, <em>Actual:</em> ${result.actual}<br>
                        <em>Category:</em> ${result.category}
                        ${result.details ? `<div class="test-details">${result.details}</div>` : ''}
                    `;
                    passContainer.appendChild(resultDiv);
                });
                resultsDiv.appendChild(passContainer);
            }

            const passCount = testResults.filter(r => r.passed).length;
            const failCount = testResults.length - passCount;
            const successRate = testResults.length > 0 ? Math.round((passCount / testResults.length) * 100) : 0;
            const summaryContent = document.getElementById('summary-content');
            summaryContent.innerHTML = `
                <p><strong>Total Tests:</strong> ${testResults.length}</p>
                <p><strong>Passed:</strong> ${passCount} ‚úÖ</p>
                <p><strong>Failed:</strong> ${failCount} ‚ùå</p>
                <p><strong>Success Rate:</strong> ${successRate}%</p>
            `;
            document.getElementById('summary').style.display = 'block';

            // Save results to dashboard
            if (window.TestDashboard) {
                window.TestDashboard.saveTestResult('test_comprehensive_suite.html', {
                    total: testResults.length,
                    passed: passCount,
                    failed: failCount,
                    successRate: successRate
                });
            }
        }

        // ===== CORE LOGIC TESTS =====
        function testCoreLogic() {
            addResult('Learning State Initialization', 
                typeof window.learningState === 'object' && window.learningState !== null,
                'Learning state object exists',
                typeof window.learningState,
                'Core Logic'
            );

            addResult('Quiz Data Loading',
                typeof window.quizData === 'object' && Object.keys(window.quizData).length > 0,
                'Quiz data loaded with keys',
                Object.keys(window.quizData).length + ' keys loaded',
                'Core Logic'
            );

            addResult('Learning Path Configuration',
                Array.isArray(window.learningPath) && window.learningPath.length > 0,
                'Learning path array exists with levels',
                window.learningPath.length + ' levels configured',
                'Core Logic'
            );

            addResult('Question Types Constants',
                typeof window.QUESTION_TYPES === 'object' && window.QUESTION_TYPES.ACCIDENTALS_COUNT,
                'Question types constants defined',
                Object.keys(window.QUESTION_TYPES).length + ' types defined',
                'Core Logic'
            );

            addResult('Modes Constants',
                typeof window.MODES === 'object' && window.MODES.LINEAR,
                'Practice modes constants defined',
                Object.keys(window.MODES).length + ' modes defined',
                'Core Logic'
            );
        }

        // ===== DATA INTEGRITY TESTS =====
        function testDataIntegrity() {
            const allKeys = Object.keys(quizData);
            
            allKeys.forEach(key => {
                const keyData = quizData[key];
                const requiredProps = ['accidentals', 'notes', 'scale', 'triads', 'sevenths', 'seventhSpelling'];
                
                requiredProps.forEach(prop => {
                    const hasProp = keyData.hasOwnProperty(prop);
                    addResult(
                        `${key} - ${prop} Property`,
                        hasProp,
                        'Property exists',
                        hasProp ? 'Property exists' : 'Property missing',
                        'Data Integrity',
                        `Key: ${key}, Property: ${prop}`
                    );
                });
                
                // Test scale has exactly 7 notes
                const scaleLength = keyData.scale ? keyData.scale.length : 0;
                addResult(
                    `${key} - Scale Length`,
                    scaleLength === 7,
                    7,
                    scaleLength,
                    'Data Integrity',
                    `Key: ${key}`
                );

                // Test accidentals count matches notes array
                const accidentalsCount = keyData.accidentals || 0;
                const notesLength = keyData.notes ? keyData.notes.length : 0;
                addResult(
                    `${key} - Accidentals Count Consistency`,
                    accidentalsCount === notesLength,
                    accidentalsCount,
                    notesLength,
                    'Data Integrity',
                    `Key: ${key}`
                );

                // Test all degrees exist for triads and sevenths
                [2, 3, 4, 5, 6, 7].forEach(degree => {
                    const triadExists = keyData.triads && keyData.triads[degree.toString()];
                    addResult(
                        `${key} - Triad Degree ${degree}`,
                        triadExists,
                        'Triad exists',
                        triadExists ? 'Exists' : 'Missing',
                        'Data Integrity',
                        `Key: ${key}, Degree: ${degree}`
                    );

                    const seventhExists = keyData.sevenths && keyData.sevenths[degree.toString()];
                    addResult(
                        `${key} - Seventh Degree ${degree}`,
                        seventhExists,
                        'Seventh exists',
                        seventhExists ? 'Exists' : 'Missing',
                        'Data Integrity',
                        `Key: ${key}, Degree: ${degree}`
                    );

                    const spellingExists = keyData.seventhSpelling && keyData.seventhSpelling[degree.toString()];
                    addResult(
                        `${key} - Seventh Spelling Degree ${degree}`,
                        spellingExists,
                        'Spelling exists',
                        spellingExists ? 'Exists' : 'Missing',
                        'Data Integrity',
                        `Key: ${key}, Degree: ${degree}`
                    );
                });
            });
        }

        // ===== VALIDATION TESTS =====
        function testValidation() {
            // Test normalization
            const normalizeTests = [
                { input: 'Cm', expected: 'Cm' },
                { input: 'C#m', expected: 'C‚ôØm' },
                { input: 'Dbm', expected: 'D‚ô≠m' },
                { input: 'F##m', expected: 'FùÑ™m' },
                { input: 'Gbbm', expected: 'GùÑ´m' },
                { input: 'Amaj7', expected: 'Amaj7' },
                { input: 'Bm7b5', expected: 'Bm7‚ô≠5' }
            ];

            normalizeTests.forEach(test => {
                const actual = window.normalizeChord ? window.normalizeChord(test.input) : 'no normalizeChord';
                addResult(
                    `Normalize Chord: ${test.input}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Validation',
                    `Input: ${test.input}`
                );
            });

            // Test answer validation
            const validationTests = [
                { answer: 'Cm', type: 'triads', key: 'C', degree: 1, expected: true },
                { answer: 'Dm', type: 'triads', key: 'C', degree: 2, expected: true },
                { answer: 'Cm', type: 'triads', key: 'C', degree: 2, expected: false },
                { answer: 'C D E F G A B', type: 'scale', key: 'C', expected: true },
                { answer: 'C E D F G A B', type: 'scale', key: 'C', expected: false },
                { answer: '0', type: 'accCount', key: 'C', expected: true },
                { answer: '1', type: 'accCount', key: 'C', expected: false }
            ];

            validationTests.forEach(test => {
                const actual = window.checkAnswer ? window.checkAnswer(test.answer, test.type, test.key, test.degree, window.quizData) : 'no checkAnswer';
                addResult(
                    `Check Answer: ${test.answer} (${test.type})`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Validation',
                    `Answer: ${test.answer}, Type: ${test.type}, Key: ${test.key}`
                );
            });
        }

        // ===== HELPER FUNCTION TESTS =====
        function testHelperFunctions() {
            // Test ordinal function
            const ordinalTests = [
                { input: 1, expected: '1st' },
                { input: 2, expected: '2nd' },
                { input: 3, expected: '3rd' },
                { input: 4, expected: '4th' },
                { input: 11, expected: '11th' },
                { input: 12, expected: '12th' },
                { input: 13, expected: '13th' }
            ];

            ordinalTests.forEach(test => {
                const actual = window.ordinal ? window.ordinal(test.input) : 'no ordinal';
                addResult(
                    `Ordinal: ${test.input}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Helper Functions'
                );
            });

            // Test word to number conversion
            const wordTests = [
                { input: 'one', expected: 1 },
                { input: 'two', expected: 2 },
                { input: 'three', expected: 3 },
                { input: 'ten', expected: 10 },
                { input: 'invalid', expected: null }
            ];

            wordTests.forEach(test => {
                const actual = window.wordToNumber ? window.wordToNumber(test.input) : 'no wordToNumber';
                addResult(
                    `Word to Number: ${test.input}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Helper Functions'
                );
            });

            // Test accidental to unicode conversion
            const accidentalTests = [
                { input: 'C#', expected: 'C‚ôØ' },
                { input: 'Db', expected: 'D‚ô≠' },
                { input: 'F##', expected: 'FùÑ™' },
                { input: 'Gbb', expected: 'GùÑ´' }
            ];

            accidentalTests.forEach(test => {
                const actual = window.accidentalToUnicode ? window.accidentalToUnicode(test.input) : 'no accidentalToUnicode';
                addResult(
                    `Accidental to Unicode: ${test.input}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Helper Functions'
                );
            });
        }

        // ===== ERROR HANDLING TESTS =====
        function testErrorHandling() {
            // Test error handler initialization
            addResult(
                'Error Handler Object',
                typeof window.ErrorHandler === 'object' && window.ErrorHandler !== null,
                'Error handler object exists',
                typeof window.ErrorHandler,
                'Error Handling'
            );

            // Test error types
            addResult(
                'Error Types Constants',
                window.ErrorHandler && window.ErrorHandler.ERROR_TYPES && window.ErrorHandler.ERROR_TYPES.STATE_ERROR,
                'Error types constants defined',
                window.ErrorHandler ? Object.keys(window.ErrorHandler.ERROR_TYPES).length + ' types' : 'no ErrorHandler',
                'Error Handling'
            );

            // Test error severity levels
            addResult(
                'Error Severity Levels',
                window.ErrorHandler && window.ErrorHandler.ERROR_SEVERITY && window.ErrorHandler.ERROR_SEVERITY.LOW,
                'Error severity levels defined',
                window.ErrorHandler ? Object.keys(window.ErrorHandler.ERROR_SEVERITY).length + ' levels' : 'no ErrorHandler',
                'Error Handling'
            );

            // Test AppError class
            if (window.ErrorHandler && window.ErrorHandler.AppError) {
                try {
                    const testError = new window.ErrorHandler.AppError('Test error', 'STATE_ERROR', 'low');
                    addResult(
                        'AppError Class Creation',
                        testError instanceof Error && testError.type === 'STATE_ERROR',
                        'AppError instance created successfully',
                        'AppError created with correct type',
                        'Error Handling'
                    );
                } catch (e) {
                    addResult(
                        'AppError Class Creation',
                        false,
                        'AppError instance created successfully',
                        'Exception: ' + e.message,
                        'Error Handling'
                    );
                }
            } else {
                addResult(
                    'AppError Class',
                    false,
                    'AppError class exists',
                    'AppError class not found',
                    'Error Handling'
                );
            }
        }

        // ===== LEARNING PATH TESTS =====
        function testLearningPath() {
            // Test learning path progression
            const testState = {
                currentLevelIndex: 0,
                currentChapterIndex: 0,
                currentKeyIndex: 0,
                correctAnswerStreak: 0,
                usedDegrees: [],
                correctChordAnswersForCurrentKey: 0
            };

            // Simulate a few questions to test progression
            let questionCount = 0;
            const maxQuestions = 50;

            while (testState.currentLevelIndex < window.learningPath.length && questionCount < maxQuestions) {
                const level = window.learningPath[testState.currentLevelIndex];
                
                if (!level || level.mode === 'complete') {
                    break;
                }

                // Determine current key and chapter
                let key, chapter;
                
                if (level.mode === window.MODES.LINEAR) {
                    key = level.keys[testState.currentKeyIndex];
                    chapter = level.chapters[testState.currentChapterIndex];
                } else {
                    key = level.keys[0]; // Use first key for testing
                    chapter = level.chapters[testState.currentChapterIndex];
                }

                // Skip accidentals naming for C major
                if (key === 'C' && chapter.id === window.QUESTION_TYPES.ACCIDENTALS_NAMES) {
                    testState.currentChapterIndex++;
                    continue;
                }

                questionCount++;
                testState.correctAnswerStreak++;

                // Simulate progression logic
                if (level.mode === window.MODES.LINEAR) {
                    if (chapter.id === window.QUESTION_TYPES.TRIADS) {
                        testState.correctChordAnswersForCurrentKey++;
                        
                        if (testState.correctChordAnswersForCurrentKey >= 3) {
                            testState.correctChordAnswersForCurrentKey = 0;
                            testState.currentKeyIndex++;
                            
                            if (testState.currentKeyIndex >= level.keys.length) {
                                testState.currentLevelIndex++;
                                testState.currentChapterIndex = 0;
                                testState.currentKeyIndex = 0;
                                testState.correctAnswerStreak = 0;
                            } else {
                                testState.currentChapterIndex = 0;
                            }
                        } else {
                            testState.currentChapterIndex++;
                            if (testState.currentChapterIndex >= level.chapters.length) {
                                testState.currentChapterIndex = 0;
                            }
                        }
                    } else {
                        testState.currentChapterIndex++;
                        if (testState.currentChapterIndex >= level.chapters.length) {
                            testState.currentChapterIndex = 0;
                        }
                    }
                } else {
                    testState.currentChapterIndex++;
                    if (testState.currentChapterIndex >= level.chapters.length) {
                        testState.currentChapterIndex = 0;
                    }
                }
            }

            addResult(
                'Learning Path Progression',
                testState.currentLevelIndex > 0,
                'Progression through levels',
                `Reached level ${testState.currentLevelIndex} after ${questionCount} questions`,
                'Learning Path'
            );
        }

        // ===== UI/UX TESTS =====
        function testUIUX() {
            // Test DOM element creation
            const testDiv = document.createElement('div');
            testDiv.id = 'test-element';
            testDiv.textContent = 'Test content';
            document.body.appendChild(testDiv);

            addResult(
                'DOM Element Creation',
                document.getElementById('test-element') !== null,
                'Element created and found',
                document.getElementById('test-element') ? 'Element found' : 'Element not found',
                'UI/UX'
            );

            // Test element text setting
            const testElement = document.getElementById('test-element');
            if (testElement) {
                testElement.textContent = 'Updated content';
                addResult(
                    'Element Text Update',
                    testElement.textContent === 'Updated content',
                    'Text updated successfully',
                    testElement.textContent,
                    'UI/UX'
                );
            }

            // Clean up
            if (testDiv.parentNode) {
                testDiv.parentNode.removeChild(testDiv);
            }

            // Test localStorage functionality
            try {
                localStorage.setItem('test-key', 'test-value');
                const retrieved = localStorage.getItem('test-key');
                localStorage.removeItem('test-key');
                
                addResult(
                    'LocalStorage Functionality',
                    retrieved === 'test-value',
                    'LocalStorage working',
                    retrieved === 'test-value' ? 'Working' : 'Not working',
                    'UI/UX'
                );
            } catch (e) {
                addResult(
                    'LocalStorage Functionality',
                    false,
                    'LocalStorage working',
                    'Exception: ' + e.message,
                    'UI/UX'
                );
            }

            // Test JSON parsing
            try {
                const testObj = { test: 'value', number: 123 };
                const jsonString = JSON.stringify(testObj);
                const parsed = JSON.parse(jsonString);
                
                addResult(
                    'JSON Serialization',
                    JSON.stringify(parsed) === jsonString,
                    'JSON serialization working',
                    'Working',
                    'UI/UX'
                );
            } catch (e) {
                addResult(
                    'JSON Serialization',
                    false,
                    'JSON serialization working',
                    'Exception: ' + e.message,
                    'UI/UX'
                );
            }
        }

        // ===== PERFORMANCE TESTS =====
        function testPerformance() {
            // Test large dataset handling
            const startTime = performance.now();
            const allKeys = Object.keys(window.quizData);
            let totalChords = 0;

            allKeys.forEach(key => {
                const keyData = window.quizData[key];
                if (keyData.triads) {
                    totalChords += Object.keys(keyData.triads).length;
                }
                if (keyData.sevenths) {
                    totalChords += Object.keys(keyData.sevenths).length;
                }
            });

            const endTime = performance.now();
            const processingTime = endTime - startTime;

            addResult(
                'Large Dataset Processing',
                processingTime < 100, // Should process in under 100ms
                'Processing time < 100ms',
                `${processingTime.toFixed(2)}ms for ${totalChords} chords`,
                'Performance'
            );

            // Test memory usage (approximate)
            const memoryUsage = performance.memory ? performance.memory.usedJSHeapSize : 'Not available';
            addResult(
                'Memory Usage Available',
                typeof memoryUsage === 'number' || memoryUsage === 'Not available',
                'Memory usage information available',
                typeof memoryUsage === 'number' ? `${(memoryUsage / 1024 / 1024).toFixed(2)}MB` : memoryUsage,
                'Performance'
            );
        }

        // ===== INTEGRATION TESTS =====
        function testIntegration() {
            // Test complete question generation and validation workflow
            const testKey = 'C';
            const testDegree = 2;
            const testChord = 'Dm';

            // Test chord normalization
            const normalizedChord = window.normalizeChord ? window.normalizeChord(testChord) : testChord;
            
            // Test answer validation
            const isValid = window.checkAnswer ? window.checkAnswer(normalizedChord, 'triads', testKey, testDegree, window.quizData) : false;

            addResult(
                'Complete Workflow: Chord Validation',
                isValid,
                'Complete workflow successful',
                isValid ? 'Workflow successful' : 'Workflow failed',
                'Integration',
                `Key: ${testKey}, Degree: ${testDegree}, Chord: ${testChord}`
            );

            // Test scale spelling workflow
            const testScale = 'C D E F G A B';
            const isScaleValid = window.checkAnswer ? window.checkAnswer(testScale, 'scale', testKey, null, window.quizData) : false;

            addResult(
                'Complete Workflow: Scale Validation',
                isScaleValid,
                'Scale validation workflow successful',
                isScaleValid ? 'Workflow successful' : 'Workflow failed',
                'Integration',
                `Key: ${testKey}, Scale: ${testScale}`
            );
        }

        // ===== ADVANCED FEATURE TESTS =====
        function testAdvancedFeatures() {
            // Test seventh chord spelling validation
            const seventhTests = [
                { answer: 'E G# B D', key: 'A', degree: 5, expected: true },
                { answer: 'D F# A C', key: 'G', degree: 5, expected: true },
                { answer: 'C E G Bb', key: 'F', degree: 5, expected: true },
                { answer: 'E G# B C', key: 'A', degree: 5, expected: false }
            ];

            seventhTests.forEach(test => {
                const actual = window.checkAnswer ? window.checkAnswer(test.answer, 'seventhSpelling', test.key, test.degree, window.quizData) : 'no checkAnswer';
                addResult(
                    `Seventh Spelling: ${test.answer}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Advanced Features',
                    `Key: ${test.key}, Degree: ${test.degree}`
                );
            });

            // Test accidentals naming
            const accidentalsTests = [
                { answer: 'F#', key: 'G', expected: true },
                { answer: 'F# C#', key: 'D', expected: true },
                { answer: 'F# C# G#', key: 'A', expected: true },
                { answer: 'F# C#', key: 'G', expected: false }
            ];

            accidentalsTests.forEach(test => {
                const actual = window.checkAnswer ? window.checkAnswer(test.answer, 'accNotes', test.key, null, window.quizData) : 'no checkAnswer';
                addResult(
                    `Accidentals Naming: ${test.answer}`,
                    actual === test.expected,
                    test.expected,
                    actual,
                    'Advanced Features',
                    `Key: ${test.key}`
                );
            });
        }

        // ===== TEST RUNNERS =====
        function runAllTests() {
            testResults = [];
            testCoreLogic();
            testDataIntegrity();
            testValidation();
            testHelperFunctions();
            testErrorHandling();
            testLearningPath();
            testUIUX();
            testPerformance();
            testIntegration();
            testAdvancedFeatures();
            displayResults();
        }

        function runCoreTests() {
            testResults = [];
            testCoreLogic();
            testHelperFunctions();
            testLearningPath();
            displayResults();
        }

        function runDataTests() {
            testResults = [];
            testDataIntegrity();
            testValidation();
            displayResults();
        }

        function runUITests() {
            testResults = [];
            testUIUX();
            testIntegration();
            displayResults();
        }

        function runAdvancedTests() {
            testResults = [];
            testAdvancedFeatures();
            testErrorHandling();
            displayResults();
        }

        function runPerformanceTests() {
            testResults = [];
            testPerformance();
            displayResults();
        }

        function copyResults() {
            const results = {
                timestamp: new Date().toISOString(),
                total: testResults.length,
                passed: testResults.filter(r => r.passed).length,
                failed: testResults.filter(r => !r.passed).length,
                results: testResults
            };

            const json = JSON.stringify(results, null, 2);
            navigator.clipboard.writeText(json).then(() => {
                document.getElementById('copy-status').textContent = 'Results copied to clipboard!';
            }, () => {
                document.getElementById('copy-status').textContent = 'Failed to copy results.';
            });
        }

        // Initialize tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Comprehensive test suite loaded');
        });
    </script>
</body>
</html> 