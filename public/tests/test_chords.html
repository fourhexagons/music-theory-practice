<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Theory Practice - Testing Platform</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .chord-test {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
        .chord-input {
            font-weight: bold;
            color: #495057;
        }
        .chord-output {
            font-family: monospace;
            color: #6c757d;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .summary {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .error-details {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 8px 15px;
            background-color: #6c757d;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 1em;
        }
        .back-link:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Test Suite</a>
    <h1>üéµ Music Theory Practice - Testing Platform</h1>
    
    <div class="test-section">
        <h2>Test Controls</h2>
        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="runChordTests()">Test Chord Normalization</button>
        <button onclick="runAccidentalTests()">Test Accidental Handling</button>
        <button onclick="runAdvancedModeTests()">Test Advanced Modes</button>
        <button onclick="runValidationTests()">Test Chord Validation</button>
        <button onclick="runEdgeCaseTests()">Test Edge Cases</button>
        <button onclick="showAllChordVariations()">Show All Chord Variations</button>
        <button onclick="clearResults()">Clear Results</button>
        <button id="copy-json-button" onclick="copyResultsToClipboard()">Copy JSON</button>
    </div>

    <div id="summary" class="summary" style="display: none;">
        <h3>Test Summary</h3>
        <div id="summary-content"></div>
    </div>

    <div id="results"></div>

    <script src="../js/utils/normalization.js"></script>
    <script>
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            errors: []
        };

        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('summary').style.display = 'none';
            testResults = { total: 0, passed: 0, failed: 0, errors: [] };
        }

        function copyResultsToClipboard() {
            const json = JSON.stringify(testResults, null, 2);
            const button = document.getElementById('copy-json-button');
            navigator.clipboard.writeText(json).then(() => {
                if (button) {
                    button.textContent = 'Copied!';
                    setTimeout(() => { button.textContent = 'Copy JSON'; }, 2000);
                }
            }).catch(err => {
                console.error('Failed to copy results:', err);
                if (button) {
                    button.textContent = 'Error!';
                    setTimeout(() => { button.textContent = 'Copy JSON'; }, 2000);
                }
            });
        }

        function addResult(testName, input, expected, actual, passed) {
            testResults.total++;
            if (passed) {
                testResults.passed++;
            } else {
                testResults.failed++;
                testResults.errors.push({
                    test: testName,
                    input: input,
                    expected: expected,
                    actual: actual
                });
            }

            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${passed ? 'pass' : 'fail'}`;
            resultDiv.innerHTML = `
                <strong>${testName}</strong><br>
                Input: <span class="chord-input">${input}</span><br>
                Expected: <span class="chord-output">${expected}</span><br>
                Actual: <span class="chord-output">${actual}</span><br>
                Status: ${passed ? '‚úÖ PASS' : '‚ùå FAIL'}
            `;
            document.getElementById('results').appendChild(resultDiv);
        }

        function updateSummary() {
            const summaryDiv = document.getElementById('summary');
            const contentDiv = document.getElementById('summary-content');
            
            contentDiv.innerHTML = `
                <p><strong>Total Tests:</strong> ${testResults.total}</p>
                <p><strong>Passed:</strong> ${testResults.passed} ‚úÖ</p>
                <p><strong>Failed:</strong> ${testResults.failed} ‚ùå</p>
                <p><strong>Success Rate:</strong> ${testResults.total > 0 ? Math.round((testResults.passed / testResults.total) * 100) : 0}%</p>
            `;

            if (testResults.errors.length > 0) {
                contentDiv.innerHTML += '<h4>Errors:</h4>';
                testResults.errors.forEach(error => {
                    contentDiv.innerHTML += `
                        <div class="error-details">
                            <strong>${error.test}</strong><br>
                            Input: ${error.input}<br>
                            Expected: ${error.expected}<br>
                            Actual: ${error.actual}
                        </div>
                    `;
                });
            }

            summaryDiv.style.display = 'block';
        }

        function testChordNormalization() {
            const chordTests = [
                // Basic chord types
                { input: 'C', expected: 'C', description: 'Basic major chord' },
                { input: 'Cm', expected: 'Cm', description: 'Basic minor chord' },
                { input: 'C7', expected: 'C7', description: 'Basic dominant 7th' },
                { input: 'Cmaj7', expected: 'Cmaj7', description: 'Major 7th' },
                { input: 'Cm7', expected: 'Cm7', description: 'Minor 7th' },
                
                // Jazz notation
                { input: 'C‚àÜ', expected: 'Cmaj7', description: 'Jazz delta symbol' },
                { input: 'C‚àÜ7', expected: 'Cmaj7', description: 'Jazz delta with 7' },
                { input: 'CM7', expected: 'Cmaj7', description: 'M7 notation' },
                { input: 'Cmin7', expected: 'Cm7', description: 'min7 notation' },
                { input: 'C-7', expected: 'Cm7', description: 'Dash notation' },
                
                // Accidentals - students use lowercase 'b' for flat
                { input: 'db7', expected: 'D‚ô≠7', description: 'Flat with b (lowercase)' },
                { input: 'f#7', expected: 'F‚ôØ7', description: 'Sharp with #' },
                { input: 'bb7', expected: 'B‚ô≠7', description: 'B flat (lowercase b)' },
                { input: 'ab‚àÜ', expected: 'A‚ô≠maj7', description: 'A flat with delta (lowercase)' },
                { input: 'gb-7', expected: 'G‚ô≠m7', description: 'G flat minor 7 (lowercase)' },
                
                // Complex cases
                { input: 'c#m7b5', expected: 'C‚ôØm7‚ô≠5', description: 'Half-diminished' },
                { input: 'Ddim', expected: 'DÀö', description: 'Diminished' },
                { input: 'Ehalfdim', expected: 'Em7‚ô≠5', description: 'Half-diminished text' },
                { input: 'F√∏', expected: 'Fm7‚ô≠5', description: 'Half-diminished symbol' },
                
                // Edge cases
                { input: 'C MAJOR', expected: 'C', description: 'Case insensitive - uppercase major' },
                { input: 'c minor', expected: 'Cm', description: 'Case insensitive - lowercase minor' },
                { input: 'D MINOR 7', expected: 'Dm7', description: 'Case insensitive - uppercase minor 7' },
                { input: 'E - 7', expected: 'Em7', description: 'Dash with spaces' },
                { input: 'F  MAJ7  ', expected: 'Fmaj7', description: 'Extra spaces' },
                { input: 'C‚àÜ', expected: 'Cmaj7', description: 'Delta symbol (U+2206)' },
                { input: 'CŒî', expected: 'Cmaj7', description: 'Delta symbol (U+0394)' },

                // Double accidentals
                { input: 'bbb', expected: 'BùÑ´', description: 'B double flat (lowercase)' },
                { input: 'f##', expected: 'FùÑ™', description: 'F double sharp' },
                { input: 'fx', expected: 'FùÑ™', description: 'F double sharp with x' },

                // Unicode checks
                { input: 'C‚ôØ', expected: 'C‚ôØ', description: 'C sharp unicode' },
            ];

            chordTests.forEach(test => {
                const result = normalizeChord(test.input);
                addResult(test.description, test.input, test.expected, result, result === test.expected);
            });
            updateSummary();
        }

        function testAccidentalHandling() {
            const accidentalTests = [
                { input: 'db', expected: 'D‚ô≠', description: 'D flat (lowercase)' },
                { input: 'f#', expected: 'F‚ôØ', description: 'F sharp' },
                { input: 'bb', expected: 'B‚ô≠', description: 'B flat (lowercase)' },
                { input: 'c#', expected: 'C‚ôØ', description: 'C sharp' },
                { input: 'gb', expected: 'G‚ô≠', description: 'G flat (lowercase)' },
                { input: 'ab', expected: 'A‚ô≠', description: 'A flat (lowercase)' },
                { input: 'eb', expected: 'E‚ô≠', description: 'E flat (lowercase)' },
                { input: 'd#', expected: 'D‚ôØ', description: 'D sharp' },
                { input: 'g#', expected: 'G‚ôØ', description: 'G sharp' },
                { input: 'a#', expected: 'A‚ôØ', description: 'A sharp' },
                { input: 'e#', expected: 'E‚ôØ', description: 'E sharp' },
                { input: 'b#', expected: 'B‚ôØ', description: 'B sharp' },
                { input: 'cb', expected: 'C‚ô≠', description: 'C flat (lowercase)' },
                { input: 'fb', expected: 'F‚ô≠', description: 'F flat (lowercase)' },
                { input: 'bb', expected: 'B‚ô≠', description: 'Double flat b (lowercase)' },
                { input: 'bbb', expected: 'B\uD834\uDD2B', description: 'B double flat (lowercase)' },
                { input: 'f##', expected: 'F\uD834\uDD2A', description: 'F double sharp' },
                { input: 'fx', expected: 'F\uD834\uDD2A', description: 'F double sharp with x' }
            ];

            accidentalTests.forEach(test => {
                const actual = accidentalToUnicode(test.input);
                const passed = actual === test.expected;
                addResult(test.description, test.input, test.expected, actual, passed);
            });
        }

        function testAdvancedModeLogic() {
            // Test the A/B pair logic
            const testCases = [
                {
                    description: 'G major accidentals count should trigger naming',
                    key: 'G',
                    accidentalsCount: 1,
                    shouldAskNaming: true
                },
                {
                    description: 'F# major accidentals count should trigger naming',
                    key: 'F‚ôØ',
                    accidentalsCount: 6,
                    shouldAskNaming: true
                }
            ];

            testCases.forEach(testCase => {
                const data = quizData[testCase.key];
                const actualShouldAsk = data.accidentals > 0;
                const passed = actualShouldAsk === testCase.shouldAskNaming;
                addResult(
                    testCase.description,
                    `${testCase.key} (${testCase.accidentalsCount} accidentals)`,
                    testCase.shouldAskNaming ? 'Should ask naming' : 'Should NOT ask naming',
                    actualShouldAsk ? 'Would ask naming' : 'Would NOT ask naming',
                    passed
                );
            });
        }

        function testChordDataIntegrity() {
            // Test that all chord data is properly formatted
            allKeys.forEach(key => {
                const data = quizData[key];
                
                // Test triad data
                [2, 3, 4, 5, 6, 7].forEach(degree => {
                    const triad = data.triads[degree];
                    const seventh = data.sevenths[degree];
                    
                    if (!triad) {
                        addResult(
                            `Missing triad for ${key} degree ${degree}`,
                            `${key} degree ${degree}`,
                            'Should have triad',
                            'Missing triad',
                            false
                        );
                    }
                    
                    if (!seventh) {
                        addResult(
                            `Missing seventh for ${key} degree ${degree}`,
                            `${key} degree ${degree}`,
                            'Should have seventh',
                            'Missing seventh',
                            false
                        );
                    }
                });
            });
        }

        function testChordAnswerValidation() {
            // Test actual chord answer validation scenarios
            const validationTests = [
                // Test the specific case that was failing
                {
                    description: 'db7 for 5th seventh chord in G‚ô≠ major',
                    key: 'G‚ô≠',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'db7',
                    expected: true,
                    correctAnswer: 'D‚ô≠7'
                },
                {
                    description: 'ab‚àÜ for 4th seventh chord in Eb major',
                    key: 'E‚ô≠',
                    degree: 4,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'ab‚àÜ',
                    expected: true,
                    correctAnswer: 'A‚ô≠maj7'
                },
                {
                    description: 'f#7 for 5th seventh chord in B major',
                    key: 'B',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'f#7',
                    expected: true,
                    correctAnswer: 'F‚ôØ7'
                },
                {
                    description: 'bb7 for 5th seventh chord in Eb major',
                    key: 'E‚ô≠',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'bb7',
                    expected: true,
                    correctAnswer: 'B‚ô≠7'
                },
                // Test various input formats for the same chord
                {
                    description: 'D‚ô≠7 (unicode) for 5th seventh chord in G‚ô≠ major',
                    key: 'G‚ô≠',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'D‚ô≠7',
                    expected: true,
                    correctAnswer: 'D‚ô≠7'
                },
                {
                    description: 'A‚ô≠maj7 (unicode) for 4th seventh chord in Eb major',
                    key: 'E‚ô≠',
                    degree: 4,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'A‚ô≠maj7',
                    expected: true,
                    correctAnswer: 'A‚ô≠maj7'
                },
                // Test triad variations
                {
                    description: 'db (triad) for 5th triad in G‚ô≠ major',
                    key: 'G‚ô≠',
                    degree: 5,
                    chapterId: QUESTION_TYPES.TRIADS,
                    input: 'db',
                    expected: true,
                    correctAnswer: 'D‚ô≠'
                },
                {
                    description: 'ab (triad) for 4th triad in Eb major',
                    key: 'E‚ô≠',
                    degree: 4,
                    chapterId: QUESTION_TYPES.TRIADS,
                    input: 'ab',
                    expected: true,
                    correctAnswer: 'A‚ô≠'
                },
                {
                    description: 'C‚àÜ for 5th seventh chord in F major (should reject - wrong chord type)',
                    key: 'F',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'C‚àÜ',
                    expected: false,
                    correctAnswer: 'C7'
                },
                {
                    description: 'CŒî for 5th seventh chord in F major (should reject - wrong chord type)',
                    key: 'F',
                    degree: 5,
                    chapterId: QUESTION_TYPES.SEVENTHS,
                    input: 'CŒî',
                    expected: false,
                    correctAnswer: 'C7'
                }
            ];

            validationTests.forEach(test => {
                // Create a mock question object
                const mockQuestion = {
                    key: test.key,
                    chapterId: test.chapterId,
                    degree: test.degree
                };

                // Store the original currentQuestion
                const originalQuestion = learningState.currentQuestion;
                learningState.currentQuestion = mockQuestion;

                // Test the answer
                const actual = checkAnswer(test.input);
                const passed = actual === test.expected;

                // Restore original question
                learningState.currentQuestion = originalQuestion;

                addResult(
                    test.description,
                    test.input,
                    test.expected ? `Should accept (${test.correctAnswer})` : 'Should reject',
                    actual ? 'Accepted' : 'Rejected',
                    passed
                );
            });
        }

        function testEdgeCases() {
            // Test edge cases and potential issues
            const edgeCases = [
                {
                    description: 'Empty string should be rejected',
                    input: '',
                    expected: false
                },
                {
                    description: 'Just spaces should be rejected',
                    input: '   ',
                    expected: false
                },
                {
                    description: 'Invalid chord should be rejected',
                    input: 'X7',
                    expected: false
                },
                {
                    description: 'Case insensitive major chord',
                    input: 'c',
                    expected: 'C'
                },
                {
                    description: 'Case insensitive minor chord',
                    input: 'cm',
                    expected: 'Cm'
                },
                {
                    description: 'Mixed case with accidentals (lowercase b)',
                    input: 'db7',
                    expected: 'D‚ô≠7'
                }
            ];

            edgeCases.forEach(test => {
                if (test.expected === false) {
                    // Test rejection cases
                    const actual = normalizeChord(test.input);
                    const passed = actual === '';
                    addResult(
                        test.description,
                        test.input,
                        'Should be rejected',
                        actual === '' ? 'Rejected' : `Normalized to: ${actual}`,
                        passed
                    );
                } else {
                    // Test normalization cases
                    const actual = normalizeChord(test.input);
                    const passed = actual === test.expected;
                    addResult(
                        test.description,
                        test.input,
                        test.expected,
                        actual,
                        passed
                    );
                }
            });
        }

        function testChordDataCompleteness() {
            // Test that all keys have complete chord data
            allKeys.forEach(key => {
                const data = quizData[key];
                
                // Check that all required properties exist
                const requiredProps = ['accidentals', 'notes', 'scale', 'triads', 'sevenths', 'seventhSpelling'];
                requiredProps.forEach(prop => {
                    if (!(prop in data)) {
                        addResult(
                            `Missing ${prop} for ${key}`,
                            key,
                            `Should have ${prop}`,
                            'Missing property',
                            false
                        );
                    }
                });

                // Check that accidentals count matches notes array length
                if (data.accidentals !== data.notes.length) {
                    addResult(
                        `Accidentals count mismatch for ${key}`,
                        `${key}: ${data.accidentals} accidentals, ${data.notes.length} notes`,
                        'Count should match notes length',
                        'Mismatch',
                        false
                    );
                }

                // Check that scale has 7 notes
                if (data.scale.length !== 7) {
                    addResult(
                        `Scale length incorrect for ${key}`,
                        `${key}: ${data.scale.length} notes`,
                        'Should have 7 notes',
                        'Incorrect length',
                        false
                    );
                }
            });
        }

        function runChordTests() {
            clearResults();
            testChordNormalization();
        }

        function runAccidentalTests() {
            clearResults();
            testAccidentalHandling();
            updateSummary();
        }

        function runAdvancedModeTests() {
            clearResults();
            testAdvancedModeLogic();
            testChordDataIntegrity();
            testChordDataCompleteness();
            updateSummary();
        }

        function runValidationTests() {
            clearResults();
            testChordAnswerValidation();
            updateSummary();
        }

        function runEdgeCaseTests() {
            clearResults();
            testEdgeCases();
            updateSummary();
        }

        function runAllTests() {
            clearResults();
            testChordNormalization();
            testAccidentalHandling();
            testAdvancedModeLogic();
            testChordDataIntegrity();
            testChordAnswerValidation();
            testEdgeCases();
            testChordDataCompleteness();
            updateSummary();
        }

        function showAllChordVariations() {
            clearResults();
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>üéµ All Accepted Chord Variations</h2>';
            
            // Test all variations for each chord type
            const chordVariations = {
                'Major Triads': [
                    { input: 'C', expected: 'C', description: 'Basic major' },
                    { input: 'C major', expected: 'C', description: 'Major with text' },
                    { input: 'C maj', expected: 'C', description: 'Maj abbreviation' },
                    { input: 'C MAJOR', expected: 'C', description: 'Uppercase major' },
                    { input: 'C MAJ', expected: 'C', description: 'Uppercase maj' }
                ],
                'Minor Triads': [
                    { input: 'Cm', expected: 'Cm', description: 'Basic minor' },
                    { input: 'C minor', expected: 'Cm', description: 'Minor with text' },
                    { input: 'C min', expected: 'Cm', description: 'Min abbreviation' },
                    { input: 'C-', expected: 'Cm', description: 'Dash notation' },
                    { input: 'C MINOR', expected: 'Cm', description: 'Uppercase minor' },
                    { input: 'C MIN', expected: 'Cm', description: 'Uppercase min' }
                ],
                'Dominant 7th': [
                    { input: 'C7', expected: 'C7', description: 'Basic dominant 7th' }
                ],
                'Major 7th': [
                    { input: 'Cmaj7', expected: 'Cmaj7', description: 'Basic major 7th' },
                    { input: 'C maj7', expected: 'Cmaj7', description: 'maj7 with space' },
                    { input: 'C major7', expected: 'Cmaj7', description: 'major7 with space' },
                    { input: 'CM7', expected: 'Cmaj7', description: 'M7 notation' },
                    { input: 'C‚àÜ', expected: 'Cmaj7', description: 'Delta symbol (U+2206)' },
                    { input: 'CŒî', expected: 'Cmaj7', description: 'Delta symbol (U+0394)' },
                    { input: 'C‚àÜ7', expected: 'Cmaj7', description: 'Delta with 7' },
                    { input: 'CŒî7', expected: 'Cmaj7', description: 'Delta with 7' },
                    { input: 'C MAJ7', expected: 'Cmaj7', description: 'Uppercase MAJ7' },
                    { input: 'C MAJOR7', expected: 'Cmaj7', description: 'Uppercase MAJOR7' }
                ],
                'Minor 7th': [
                    { input: 'Cm7', expected: 'Cm7', description: 'Basic minor 7th' },
                    { input: 'C min7', expected: 'Cm7', description: 'min7 with space' },
                    { input: 'C minor7', expected: 'Cm7', description: 'minor7 with space' },
                    { input: 'C-7', expected: 'Cm7', description: 'Dash with 7' },
                    { input: 'Cminor7', expected: 'Cm7', description: 'minor7 (no space)' },
                    { input: 'C MIN7', expected: 'Cm7', description: 'Uppercase MIN7' },
                    { input: 'C MINOR7', expected: 'Cm7', description: 'Uppercase MINOR7' }
                ],
                'Half-Diminished 7th': [
                    { input: 'Cm7b5', expected: 'Cm7‚ô≠5', description: 'Basic half-diminished' },
                    { input: 'C halfdiminished', expected: 'Cm7‚ô≠5', description: 'halfdiminished with space' },
                    { input: 'C halfdim', expected: 'Cm7‚ô≠5', description: 'halfdim with space' },
                    { input: 'C√ò', expected: 'Cm7‚ô≠5', description: '√ò symbol' },
                    { input: 'Chalfdiminished', expected: 'Cm7‚ô≠5', description: 'halfdiminished (no space)' },
                    { input: 'C HALFDIMINISHED', expected: 'Cm7‚ô≠5', description: 'Uppercase HALFDIMINISHED' },
                    { input: 'C HALFDIM', expected: 'Cm7‚ô≠5', description: 'Uppercase HALFDIM' }
                ],
                'Diminished Triads': [
                    { input: 'Cdim', expected: 'CÀö', description: 'Basic diminished' },
                    { input: 'C diminished', expected: 'CÀö', description: 'diminished with space' },
                    { input: 'C dim', expected: 'CÀö', description: 'dim with space' },
                    { input: 'Cdiminished', expected: 'CÀö', description: 'diminished (no space)' },
                    { input: 'C DIMINISHED', expected: 'CÀö', description: 'Uppercase DIMINISHED' },
                    { input: 'C DIM', expected: 'CÀö', description: 'Uppercase DIM' }
                ],
                'With Accidentals': [
                    { input: 'Db', expected: 'D‚ô≠', description: 'Flat with b' },
                    { input: 'D‚ô≠', expected: 'D‚ô≠', description: 'Unicode flat' },
                    { input: 'F#', expected: 'F‚ôØ', description: 'Sharp with #' },
                    { input: 'F‚ôØ', expected: 'F‚ôØ', description: 'Unicode sharp' },
                    { input: 'Db7', expected: 'D‚ô≠7', description: 'Flat dominant 7th' },
                    { input: 'F#m7', expected: 'F‚ôØm7', description: 'Sharp minor 7th' },
                    { input: 'Abmaj7', expected: 'A‚ô≠maj7', description: 'Flat major 7th' },
                    { input: 'Ab‚àÜ', expected: 'A‚ô≠maj7', description: 'Flat with delta' }
                ]
            };
            
            let totalTests = 0;
            let passedTests = 0;
            
            Object.entries(chordVariations).forEach(([category, tests]) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'test-section';
                categoryDiv.innerHTML = `<h3>${category}</h3>`;
                
                tests.forEach(test => {
                    totalTests++;
                    const result = normalizeChord(test.input);
                    const passed = result === test.expected;
                    if (passed) passedTests++;
                    
                    const testDiv = document.createElement('div');
                    testDiv.className = `chord-test ${passed ? 'pass' : 'fail'}`;
                    testDiv.innerHTML = `
                        <strong>${test.description}</strong><br>
                        Input: <span class="chord-input">${test.input}</span><br>
                        Expected: <span class="chord-output">${test.expected}</span><br>
                        Actual: <span class="chord-output">${result}</span><br>
                        Status: ${passed ? '‚úÖ PASS' : '‚ùå FAIL'}
                    `;
                    categoryDiv.appendChild(testDiv);
                });
                
                resultsDiv.appendChild(categoryDiv);
            });
            
            // Add summary
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'summary';
            summaryDiv.innerHTML = `
                <h3>Chord Variations Summary</h3>
                <p><strong>Total Tests:</strong> ${totalTests}</p>
                <p><strong>Passed:</strong> ${passedTests} ‚úÖ</p>
                <p><strong>Failed:</strong> ${totalTests - passedTests} ‚ùå</p>
                <p><strong>Success Rate:</strong> ${Math.round((passedTests / totalTests) * 100)}%</p>
            `;
            resultsDiv.appendChild(summaryDiv);
        }

        // Auto-run tests on page load
        window.addEventListener('load', () => {
            console.log('Testing platform loaded. Click "Run All Tests" to begin testing.');
        });
    </script>
</body>
</html> 