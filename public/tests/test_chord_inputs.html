<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chord Input Tests</title>
    <link rel="stylesheet" href="css/test-suite.css">
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Test Suite</a>
        <div class="header">
            <h1>Chord Input Tests</h1>
            <p>This test suite verifies how the application handles various chord inputs.</p>
        </div>
        <div class="content-box">
            <div id="summary" class="summary" style="display:none;">
                <div id="stats" class="stats-grid"></div>
            </div>
            <div class="controls">
                <button class="btn" onclick="runTests()">Run Tests</button>
            </div>
            <div id="results"></div>
        </div>
    </div>

    <script src="../js/utils/normalization.js"></script>
    <script>
        const testCases = {
            'Major Triad': [
                { input: 'C', expected: 'C' },
                { input: 'C major', expected: 'C' },
                { input: 'C maj', expected: 'C' },
                { input: 'C#', expected: 'C‚ôØ' },
                { input: 'Db', expected: 'D‚ô≠' }
            ],
            'Minor Triad': [
                { input: 'Cm', expected: 'Cm' },
                { input: 'C minor', expected: 'Cm' },
                { input: 'C-', expected: 'Cm' },
                { input: 'C#m', expected: 'C‚ôØm' },
                { input: 'Dbm', expected: 'D‚ô≠m' }
            ],
            'Dominant 7th': [
                { input: 'C7', expected: 'C7' },
                { input: 'C dom 7', expected: 'C7' },
                { input: 'C#7', expected: 'C‚ôØ7' }
            ],
            'Major 7th': [
                { input: 'Cmaj7', expected: 'Cmaj7' },
                { input: 'CM7', expected: 'Cmaj7' },
                { input: 'CŒî7', expected: 'Cmaj7' },
                { input: 'C#M7', expected: 'C‚ôØmaj7' }
            ],
            'Minor 7th': [
                { input: 'Cm7', expected: 'Cm7' },
                { input: 'C-7', expected: 'Cm7' },
                { input: 'C#m7', expected: 'C‚ôØm7' }
            ],
            'Half-Diminished 7th': [
                { input: 'C√∏', expected: 'Cm7‚ô≠5' },
                { input: 'Cm7b5', expected: 'Cm7‚ô≠5' },
                { input: 'C half-dim', expected: 'Cm7‚ô≠5' },
                { input: 'C#m7b5', expected: 'C‚ôØm7‚ô≠5' }
            ],
            'Diminished': [
                { input: 'Cdim', expected: 'CÀö' },
                { input: 'C¬∞', expected: 'CÀö' }
            ],
             'Double Accidentals': [
                { input: 'ebb7', expected: 'EùÑ´7' },
                { input: 'CXM7', expected: 'CùÑ™maj7' }
            ],
            'Spacing and Case': [
                { input: '  c maJ7 ', expected: 'Cmaj7' },
                { input: 'db  -7', expected: 'D‚ô≠m7' }
            ]
        };

        function runTests() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            let totalTests = 0;
            let passedTests = 0;
            let failedTests = 0;

            Object.keys(testCases).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'test-category';
                categoryDiv.innerHTML = `<h3>${category}</h3>`;
                resultsDiv.appendChild(categoryDiv);

                testCases[category].forEach(test => {
                    totalTests++;
                    const actual = normalizeChord(test.input);
                    const passed = actual === test.expected;
                    
                    if (passed) {
                        passedTests++;
                    } else {
                        failedTests++;
                    }

                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'test-result ' + (passed ? 'pass' : 'fail');
                    resultDiv.innerHTML = `
                        <strong>Input:</strong> <code>${test.input}</code> | 
                        <strong>Expected:</strong> <code>${test.expected}</code> | 
                        <strong>Actual:</strong> <code>${actual}</code> | 
                        <strong>Status:</strong> ${passed ? '‚úÖ PASS' : '‚ùå FAIL'}
                    `;
                    categoryDiv.appendChild(resultDiv);
                });
            });

            const summaryDiv = document.getElementById('summary');
            const statsGrid = document.getElementById('stats');
            const successRate = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;
            
            statsGrid.innerHTML = `
                <p><strong>Total Tests:</strong> ${totalTests}</p>
                <p><strong>Passed:</strong> ${passedTests} ‚úÖ</p>
                <p><strong>Failed:</strong> ${failedTests} ‚ùå</p>
                <p><strong>Success Rate:</strong> ${successRate}%</p>
            `;
            summaryDiv.style.display = 'block';
        }

        // document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html> 